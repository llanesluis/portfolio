---
import ExternalLink from "../global/ExternalLink.astro";
import GlassContainer from "../global/GlassContainer.astro";
import GradientText from "../global/GradientText.astro";
import SiteHeader from "../SiteHeader.astro";
import Technologies from "../Technologies.astro";
import GitHub from "../icons/GitHub.astro";
import LinkedIn from "../icons/LinkedIn.astro";
import Mail from "../icons/Mail.astro";
import Highlight from "../global/Highlight.astro";
import Section from "../global/Section.astro";
import { SOCIALS } from "../../constants/socials";
---

<section
  id="nav"
  class="sticky inset-x-0 top-6 z-50 opacity-0 transition duration-200 will-change-transform"
>
  <SiteHeader transition:name="header" />
</section>

<Section class="font-accent" id="hero">
  <div id="intersection">
    <header
      id="header"
      class="flex flex-col gap-8 transition duration-150 will-change-transform"
    >
      <h1 class="text-7xl font-bold max-md:text-6xl">
        hi, i'm <GradientText>luis</GradientText>
      </h1>

      <div class="flex flex-col gap-2">
        <h2 class="text-xl">
          I'm a Software Engineer & <Highlight
            >FullStack Web Developer</Highlight
          >
        </h2>

        <p class="text-muted-foreground">
          <Highlight class="font-semibold text-accent">1.5+</Highlight> years building
          with web technologies. Continuously evolving and learning new stuff.
        </p>
      </div>

      <div class="flex gap-4">
        <ExternalLink href={SOCIALS.linkedin} title={"LinkedIn"}
          ><GlassContainer
            class="group flex items-center gap-2 rounded-full px-4 py-2 text-foreground transition hover:bg-accent-light active:scale-95 dark:hover:bg-accent-dark"
            ><LinkedIn class="size-4" /> LinkedIn</GlassContainer
          ></ExternalLink
        >

        <ExternalLink href={SOCIALS.github} title={"GitHub"}
          ><GlassContainer
            class="group flex items-center gap-2 rounded-full px-4 py-2 text-foreground transition hover:bg-accent-light active:scale-95 dark:hover:bg-accent-dark"
            ><GitHub class="size-4" /> GitHub</GlassContainer
          ></ExternalLink
        >
        <ExternalLink href={SOCIALS.email} title={"Email"}
          ><GlassContainer
            class="group flex items-center gap-2 rounded-full px-4 py-2 text-foreground transition hover:bg-accent-light active:scale-95 dark:hover:bg-accent-dark"
            ><Mail class="size-4" /></GlassContainer
          >
        </ExternalLink>
      </div>

      <div class="relative w-full pt-12">
        <Technologies />
      </div>
    </header>
  </div>
</Section>
<!-- Extra space to give the header room to show up -->
<div class="h-12 md:h-8"></div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const intersectionRef = document.getElementById("intersection");
    const header = document.getElementById("header");
    const nav = document.getElementById("nav");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) {
            header?.classList.add("-translate-y-2", "scale-95", "opacity-0");
            header?.classList.remove("opacity-100");

            nav?.classList.remove(
              "-translate-y-2",
              "scale-[0.95]",
              "opacity-0",
            );
            nav?.classList.add("opacity-100", "delay-50");
          } else {
            header?.classList.remove("-translate-y-2", "scale-95", "opacity-0");
            header?.classList.add("opacity-100");

            nav?.classList.add("-translate-y-2", "scale-[0.95]", "opacity-0");
            nav?.classList.remove("opacity-100", "delay-50");
          }
        });
      },
      {
        root: null,
        rootMargin: "-80px",
      },
    );

    if (intersectionRef) {
      observer.observe(intersectionRef);
    }
  });
</script>
